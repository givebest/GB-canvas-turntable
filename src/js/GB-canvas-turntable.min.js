(function(){function t(t){return k?k+t:t.toLowerCase()}function e(t){return t=t.toLowerCase(),w?w+t:t}function n(t){y=t.getPrize,E=t.gotBack,t.config(function(e){v=t.prizes=e,p=v.length,i(t)}),r()}function i(t){if(t=t||{},t.id&&p>>>0!=0){var e,n=t.id,i=360/p/2+90,a=document.createElement("ul"),r=1/p,o=[];if(b=d(n),g=b.querySelector(".gb-turntable-canvas"),m=b.querySelector(".gb-turntable-container"),h=b.querySelector(".gb-turntable-btn"),g.getContext){e=g.getContext("2d");for(var c=0;c<p;c++){e.save(),e.beginPath(),e.translate(150,150),e.moveTo(0,0),e.rotate((360/p*c-i)*Math.PI/180),e.arc(0,0,150,0,2*Math.PI/p,!1),e.fillStyle=c%2==0?"#ffb820":"#ffcb3f",e.fill(),e.lineWidth=.5,e.strokeStyle="#e4370e",e.stroke(),e.restore();var l=t.prizes;o.push('<li class="gb-turntable-item"> <span style="'),o.push(N+": rotate("+c*r+'turn)">'),l[c].img?o.push('<img src="'+l[c].img+'" />'):o.push(l[c].text),o.push("</span> </li>"),c+1===p&&(a.className="gb-turntalbe-list",m.appendChild(a),a.innerHTML=o.join(""))}}else s("抱歉！浏览器不支持。")}}function s(t){alert(t)}function a(t){m.style="-webkit-transition: all 6s ease;transition: all 6s ease;",m.style[N]="rotate("+t+"deg)"}function r(){c(h,"click",function(){u(h,"disabled"),y(function(t){L={prizeId:t[0],chances:t[1]},x=x||0,x=x+(360-x%360)+(3600-t[0]*(360/p)),a(x)}),c(m,P,o)})}function o(){L.chances&&f(h,"disabled"),E(v[L.prizeId].text)}function c(t,e,n){"function"==typeof addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)}function l(t,e){return!(!t||!e)&&(t.classList?t.classList.contains(e):t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)")))}function u(t,e){t.classList?t.classList.add(e):l(t,e)||(t.className+=""+e)}function f(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+className.split(" ").join("|")+"(\\b|$)","gi")," ")}var d,b,m,g,p,v,h,y,E,L,w,k,x=0,T={"":"",Webkit:"webkit",Moz:"",O:"o",ms:"ms"},z=document.createElement("p"),C={};Object.keys(T).some(function(t){if(void 0!==z.style[t+(t?"T":"t")+"ransitionProperty"])return w=t?"-"+t.toLowerCase()+"-":"",k=T[t],!0}),C={cssPrefix:w,transform:e("Transform"),transitionEnd:t("TransitionEnd")};var N=C.transform,P=C.transitionEnd;d=function(t){return document.getElementById(t)};var I={init:function(t){return n(t)}};void 0===window.gbTurntable&&(window.gbTurntable=I),"function"==typeof define&&define.amd&&define("GB-canvas-turntable",[],function(){return I})})();